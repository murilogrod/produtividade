<div class="cx-page box box-primary">
		
  <cx-header-widget></cx-header-widget>

  <div class="box-body">
      <div class="container ">
        <button style="margin-left: 15px; margin-bottom: 8px" type="button" data-toggle="modal" data-target="#incluirMacroProcesso" name="novo" (click)="abrirModal(f)" class="btn btn-primary">Novo Macro Processo</button>
        <br/>
          <div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none">
            <i class="fa fa-search" style="margin:10px 10px 10px 10px"></i>
            <input #gb type="text" pInputText size="50" placeholder="Filtro Global">
          </div> 
          <p-dataTable [value] = "itens" class="col-md-12" emptyMessage="Não existem dados cadastrados"
            [globalFilter]="gb" #dt  [rows]="10" [paginator]="true">
            <p-column field="no_macroprocesso" header="Nome" [style]="{'width':'40%'}" sortable="true"></p-column>
            <p-column field="ic_ativo" header="Ativo" sortable="true"></p-column>
            <p-column header="Descrição Avatar" [style]="{'width':'40%'}" sortable="true">
              <ng-template let-col let-macroprocesso="rowData" let-ri="rowIndex" pTemplate="body">
                <span>{{macroprocesso.de_avatar}}</span>
              </ng-template>
            </p-column>
            <p-column header="Ações">
                <ng-template let-col let-dados="rowData" pTemplate="body">
                  <a name="btn-excluir" class="btn btn-link btn-xs" (click)="excluir(dados,f)" 
                    title="Excluir Macro Processo" rel="tooltip" data-placement="top">
                    <span class="glyphicon glyphicon-trash"></span>
                  </a>
                  <a name="btn-alterar" class="btn btn-link btn-xs" (click)="alterar(dados)" data-toggle="modal" data-target="#incluirMacroProcesso"
                    title="Alterar Macro Processo" rel="tooltip" data-placement="top">
                    <span class="glyphicon glyphicon-pencil"></span>
                  </a>
                </ng-template>
            </p-column>
          </p-dataTable>

          <p-confirmDialog header="Confirmação" icon="fa fa-question-circle" width="425" #cd>
            <p-footer>
              <button type="button" pButton icon="fa-close" label="Não" (click)="cd.reject()"></button>
              <button type="button" pButton icon="fa-check" label="Sim" (click)="cd.accept()"></button>
            </p-footer>
          </p-confirmDialog>
        </div>
      </div>

      <div #jModal class="modal fade" id="incluirMacroProcesso" tabindex="-1" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">{{tituloModal}}</h4>
            </div>
            <div class="modal-body">
              <div class="box-body">
                <form #f="ngForm" id="CrudMacroProcesso" name="CrudMacroProcesso">
                  
                  <div class="form-group">
                      <label for="nome">Nome:</label>
                      <input class="form-control" id="nome" [(ngModel)]="macroProcesso.no_macroprocesso" name="nome" 
                        placeholder="Nome" required #nome="ngModel" minlength="5">
                      <div *ngIf="!f.pristine && !nome.valid && nome.touched" class="alert alert-danger">
                          Nome não informado ou não tem no mínimo 5 caracteres!
                      </div>
                  </div>
                  <div class="form-group">
                    <label for="icAtivo">Ativo:</label>
                    <select class="contato-select form-control"  id="icAtivo" [(ngModel)]="macroProcesso.ic_ativo" name="icAtivo"  >
                      <option value="Sim" selected>Sim</option>
                      <option value="Não">Não</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="avatar">Avatar:</label>
                    <textarea class="form-control" id="avatar" [(ngModel)]="macroProcesso.de_avatar"  name="avatar"
                        placeholder="Descrição Avatar"></textarea>
                  </div>
                </form>
              
                <div class="modal-footer">
                  <button type="button" class="btn btn-link" data-dismiss="modal">Cancelar</button>
                  <button type="button" name="submitModal" (click)="salvar(f)" [disabled]="!f.valid" class="btn btn-primary">Gravar</button>
                </div>
              </div>
            </div>
          </div>
      </div>	
  </div>
 
