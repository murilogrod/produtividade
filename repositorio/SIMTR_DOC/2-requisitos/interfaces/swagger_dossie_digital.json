{
  "swagger": "2.0",
  "info": {
    "description": "Lista de APIs do SIMTR",
    "version": "1.0.0",
    "title": "API do sistema SIMTR"
  },
  "host": "localhost:8080",
  "basePath": "/simtr-api/rest",
  "tags": [
    {
      "name": "Dossiê Digital"
    }
  ],
  "schemes": [
    "http",
    "https"
  ],
  "paths": {
    "/dossie-digital/v1/autorizacao": {
      "post": {
        "tags": [
          "Dossiê Digital"
        ],
        "operationId": "getAutorizacao",
        "consumes": [
          "application/json",
          "application/xml"
        ],
        "produces": [
          "application/json",
          "application/xml"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": false,
            "schema": {
              "$ref": "#/definitions/AutorizacaoMultiplaRequestBodyDTO"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Autorização Concedida",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AutorizacaoRetornoDTO"
              }
            }
          },
          "400": {
            "description": "Erro de requisição",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AutorizacaoRetornoDTO"
              }
            }
          },
          "500": {
            "description": "Erro interno",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AutorizacaoRetornoDTO"
              }
            }
          },
          "503": {
            "description": "Erro de comunicação com algum sistema",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AutorizacaoRetornoDTO"
              }
            }
          }
        }
      }
    },
    "/dossie-digital/v1/cadastro/atualizacao": {
      "post": {
        "tags": [
          "Dossiê Digital"
        ],
        "operationId": "atualizaCadastroDocumentos",
        "consumes": [
          "application/json",
          "application/xml"
        ],
        "produces": [
          "application/json",
          "application/xml"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": false,
            "schema": {
              "$ref": "#/definitions/AtualizaCadastroRequestDTO"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Atualização realizada com sucesso",
            "schema": {
              "$ref": "#/definitions/AtualizaCadastroResponseDTO"
            }
          },
          "400": {
            "description": "Erro na requisição",
            "schema": {
              "$ref": "#/definitions/AtualizaCadastroResponseDTO"
            }
          },
          "500": {
            "description": "Erro interno",
            "schema": {
              "$ref": "#/definitions/AtualizaCadastroResponseDTO"
            }
          },
          "503": {
            "description": "Erro de comunicação com algum sistema",
            "schema": {
              "$ref": "#/definitions/AtualizaCadastroResponseDTO"
            }
          }
        }
      }
    },
    "/dossie-digital/v1/documento/extracao-dados": {
      "post": {
        "tags": [
          "Dossiê Digital"
        ],
        "operationId": "extrairDadosImagem",
        "consumes": [
          "application/json",
          "application/xml"
        ],
        "produces": [
          "application/json",
          "application/xml"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": false,
            "schema": {
              "$ref": "#/definitions/ExtracaoDadosRequestDTO"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Extração feita com sucesso",
            "schema": {
              "$ref": "#/definitions/ExtracaoDadosResponseDTO"
            }
          },
          "400": {
            "description": "Erro na requisição",
            "schema": {
              "$ref": "#/definitions/ExtracaoDadosResponseDTO"
            }
          },
          "500": {
            "description": "Erro interno",
            "schema": {
              "$ref": "#/definitions/ExtracaoDadosResponseDTO"
            }
          },
          "503": {
            "description": "Erro de comunicação com algum sistema",
            "schema": {
              "$ref": "#/definitions/ExtracaoDadosResponseDTO"
            }
          }
        }
      }
    },
    "/dossie-digital/v1/documento/dados-declarados": {
      "post": {
        "tags": [
          "Dossiê Digital"
        ],
        "operationId": "atualizaDadosDeclarados",
        "consumes": [
          "application/json",
          "application/xml"
        ],
        "produces": [
          "application/json",
          "application/xml"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": false,
            "schema": {
              "$ref": "#/definitions/AtualizacaoDadosRequestDTO"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Dados declarados executado com sucesso",
            "schema": {
              "$ref": "#/definitions/AtualizacaoDadosResponseDTO"
            }
          },
          "400": {
            "description": "Erro na requisição",
            "schema": {
              "$ref": "#/definitions/AtualizacaoDadosResponseDTO"
            }
          },
          "500": {
            "description": "Erro interno",
            "schema": {
              "$ref": "#/definitions/AtualizacaoDadosResponseDTO"
            }
          },
          "503": {
            "description": "Erro de comunicação com algum sistema",
            "schema": {
              "$ref": "#/definitions/AtualizacaoDadosResponseDTO"
            }
          }
        }
      }
    },
    "/dossie-digital/v1/documento/atualizacao-dados": {
      "post": {
        "tags": [
          "Dossiê Digital"
        ],
        "operationId": "atualizacaoDados",
        "consumes": [
          "application/json",
          "application/xml"
        ],
        "produces": [
          "application/json",
          "application/xml"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": false,
            "schema": {
              "$ref": "#/definitions/AtualizacaoDadosRequestDTO"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Atualização dos dados executada com sucesso",
            "schema": {
              "$ref": "#/definitions/AtualizacaoDadosResponseDTO"
            }
          },
          "400": {
            "description": "Erro na requisição",
            "schema": {
              "$ref": "#/definitions/AtualizacaoDadosResponseDTO"
            }
          },
          "500": {
            "description": "Erro interno",
            "schema": {
              "$ref": "#/definitions/AtualizacaoDadosResponseDTO"
            }
          },
          "503": {
            "description": "Erro de comunicação com algum sistema",
            "schema": {
              "$ref": "#/definitions/AtualizacaoDadosResponseDTO"
            }
          }
        }
      }
    },
    "/dossie-digital/v1/operacao/documentos-guarda": {
      "post": {
        "tags": [
          "Dossiê Digital"
        ],
        "operationId": "finalizaContratacao",
        "consumes": [
          "application/json",
          "application/xml"
        ],
        "produces": [
          "application/json",
          "application/xml"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": false,
            "schema": {
              "$ref": "#/definitions/FinalizaContratacaoRequestDTO"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Dossiê criado com sucesso",
            "schema": {
              "$ref": "#/definitions/FinalizaContratacaoResponseDTO"
            }
          },
          "400": {
            "description": "Erro na requisição",
            "schema": {
              "$ref": "#/definitions/FinalizaContratacaoResponseDTO"
            }
          },
          "500": {
            "description": "Erro interno",
            "schema": {
              "$ref": "#/definitions/FinalizaContratacaoResponseDTO"
            }
          },
          "503": {
            "description": "Erro de comunicação com algum sistema",
            "schema": {
              "$ref": "#/definitions/FinalizaContratacaoResponseDTO"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "AutorizacaoRetornoDTO": {
      "type": "object",
      "required": [
        "cpf_cnpj",
        "tipo_pessoa"
      ],
      "properties": {
        "cpf_cnpj": {
          "type": "string",
          "description": "CPF/CNPJ"
        },
        "tipo_pessoa": {
          "type": "string",
          "description": "Tipo de Pessoa",
          "enum": [
            "F",
            "J"
          ]
        },
        "codigo_retorno": {
          "type": "integer",
          "format": "int32",
          "description": "Código de retorno. 0 para ok, 99 para erro"
        },
        "observacao": {
          "type": "string",
          "description": "Descrição da mensagem de erro ou observação caso código de retorno igual a 0"
        },
        "autorizacao": {
          "type": "integer",
          "format": "int64",
          "description": "Identificador da autorização quando concedida"
        },
        "autorizado": {
          "type": "boolean",
          "description": "Indicativo se a operação foi autorizada ou não"
        },
        "produto_localizado": {
          "type": "boolean",
          "description": "Indicativo se o produto foi localizado"
        },
        "data_hora": {
          "type": "string",
          "format": "date-time",
          "description": "Data e hora da autorização no sistema"
        },
        "operacao": {
          "type": "integer",
          "format": "int32",
          "description": "Número da operação do produto"
        },
        "modalidade": {
          "type": "integer",
          "format": "int32",
          "description": "Modalidade do produto"
        },
        "produto": {
          "type": "string",
          "description": "Nome do produto na base de dados"
        },
        "documentos_pendentes": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista de documentos pendentes em caso de rejeição da operação",
          "items": {
            "type": "string",
            "xml": {
              "name": "documentos_pendentes"
            }
          }
        },
        "documentos_utilizados": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista de documentos utilizados na operação",
          "items": {
            "$ref": "#/definitions/ECMDocumentoLocalizadoDTO"
          }
        },
        "resultado_pesquisa": {
          "type": "string",
          "description": "Objeto do SIPES transformado em JSON"
        },
        "mensagens_orientacao": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista de mensagens dos sistemas procurados no SIPES",
          "items": {
            "$ref": "#/definitions/MensagemOrientacaoDTO"
          }
        }
      },
      "xml": {
        "name": "AutorizacaoRetorno"
      }
    },
    "ECMAtributosDocumentoDTO": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "classeDocumental": {
          "type": "string",
          "xml": {
            "name": "classe"
          }
        },
        "formato": {
          "type": "string",
          "xml": {
            "name": "tipo"
          }
        },
        "mimeType": {
          "type": "string"
        },
        "nome": {
          "type": "string"
        },
        "campos": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ECMCampoAtributoDocumentoDTO"
          }
        }
      }
    },
    "ECMCampoAtributoDocumentoDTO": {
      "type": "object",
      "properties": {
        "nome": {
          "type": "string"
        },
        "valor": {
          "type": "string"
        },
        "tipo": {
          "type": "string"
        }
      }
    },
    "ECMDocumentoLocalizadoDTO": {
      "type": "object",
      "properties": {
        "nuDocumento": {
          "type": "integer",
          "format": "int64"
        },
        "finalidade": {
          "type": "string"
        },
        "link": {
          "type": "string"
        },
        "atributosDocumento": {
          "$ref": "#/definitions/ECMAtributosDocumentoDTO"
        }
      }
    },
    "MensagemOrientacaoDTO": {
      "type": "object",
      "properties": {
        "sistema": {
          "type": "string"
        },
        "mensagem": {
          "type": "string"
        }
      },
      "xml": {
        "name": "MensagemOrientacao"
      }
    },
    "AutorizacaoMultiplaRequestBodyDTO": {
      "type": "object",
      "required": [
        "cpf_cnpj",
        "integracao",
        "produtos",
        "tipo_pessoa"
      ],
      "properties": {
        "cpf_cnpj": {
          "type": "string",
          "description": "CPF/CNPJ"
        },
        "tipo_pessoa": {
          "type": "string",
          "description": "Tipo de Pessoa",
          "enum": [
            "F",
            "J"
          ]
        },
        "integracao": {
          "type": "integer",
          "format": "int64",
          "description": "Código de integração para identificar o canal solicitante"
        },
        "produtos": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista de produtos a serem autorizados",
          "items": {
            "$ref": "#/definitions/ProdutoDTO"
          }
        }
      },
      "xml": {
        "name": "AutorizacaoMultiplaRequestBody"
      }
    },
    "ProdutoDTO": {
      "type": "object",
      "properties": {
        "operacao": {
          "type": "integer",
          "format": "int32",
          "description": "Número da operação do produto"
        },
        "modalidade": {
          "type": "integer",
          "format": "int32",
          "description": "Número da modalidado do produto"
        }
      }
    },
    "AtualizaCadastroResponseDTO": {
      "type": "object",
      "required": [
        "cpf_cnpj",
        "tipo_pessoa"
      ],
      "properties": {
        "cpf_cnpj": {
          "type": "string",
          "description": "CPF/CNPJ"
        },
        "tipo_pessoa": {
          "type": "string",
          "description": "Tipo de Pessoa",
          "enum": [
            "F",
            "J"
          ]
        },
        "codigo_retorno": {
          "type": "integer",
          "format": "int32",
          "description": "Código de retorno. 0 para ok, 99 para erro"
        },
        "observacao": {
          "type": "string",
          "description": "Descrição da mensagem de erro ou observação caso código de retorno igual a 0"
        }
      },
      "xml": {
        "name": "AtualizaCadastroResponse"
      }
    },
    "AtualizaCadastroRequestDTO": {
      "type": "object",
      "required": [
        "cpf_cnpj",
        "documentos",
        "tipo_pessoa"
      ],
      "properties": {
        "cpf_cnpj": {
          "type": "string",
          "description": "CPF/CNPJ"
        },
        "tipo_pessoa": {
          "type": "string",
          "description": "Tipo de Pessoa",
          "enum": [
            "F",
            "J"
          ]
        },
        "documentos": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista de identificadores dos documentos que serão atualizados",
          "items": {
            "type": "integer",
            "format": "int64",
            "xml": {
              "name": "documentos"
            }
          }
        }
      },
      "xml": {
        "name": "AtualizaCadastroRequest"
      }
    },
    "DadosDTO": {
      "type": "object",
      "required": [
        "chave",
        "valor"
      ],
      "properties": {
        "chave": {
          "type": "string",
          "description": "Nome do atributo do documento"
        },
        "valor": {
          "type": "string",
          "description": "Valor do atributo do documento"
        }
      },
      "xml": {
        "name": "dados"
      }
    },
    "ExtracaoDadosResponseDTO": {
      "type": "object",
      "required": [
        "cpf_cnpj",
        "tipo_pessoa"
      ],
      "properties": {
        "cpf_cnpj": {
          "type": "string",
          "description": "CPF/CNPJ"
        },
        "tipo_pessoa": {
          "type": "string",
          "description": "Tipo de Pessoa",
          "enum": [
            "F",
            "J"
          ]
        },
        "codigo_retorno": {
          "type": "integer",
          "format": "int32",
          "description": "Código de retorno. 0 para ok, 99 para erro"
        },
        "observacao": {
          "type": "string",
          "description": "Descrição da mensagem de erro ou observação caso código de retorno igual a 0"
        },
        "formato": {
          "type": "string",
          "description": "Formato da imagem"
        },
        "identificador": {
          "type": "integer",
          "format": "int64",
          "description": "Número único do documento"
        },
        "links": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista de URL para visualização das imagens",
          "items": {
            "type": "string",
            "xml": {
              "name": "links"
            }
          }
        },
        "dados": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista dos dados extraídos das imagens",
          "items": {
            "$ref": "#/definitions/DadosDTO"
          }
        }
      },
      "xml": {
        "name": "ExtracaoDadosResponse"
      }
    },
    "ExtracaoDadosRequestDTO": {
      "type": "object",
      "required": [
        "classe",
        "cpf_cnpj",
        "formato",
        "imagens",
        "integracao",
        "tipo_pessoa"
      ],
      "properties": {
        "cpf_cnpj": {
          "type": "string",
          "description": "CPF/CNPJ"
        },
        "tipo_pessoa": {
          "type": "string",
          "description": "Tipo de Pessoa",
          "enum": [
            "F",
            "J"
          ]
        },
        "integracao": {
          "type": "integer",
          "format": "int64",
          "description": "Código de integração para identificar o canal solicitante"
        },
        "formato": {
          "type": "string",
          "description": "Formato da imagem",
          "enum": [
            "TIFF",
            "BMP",
            "PNG",
            "JPG"
          ]
        },
        "classe": {
          "type": "string",
          "description": "Classe do documental da imagem"
        },
        "imagens": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista das imagens em base64",
          "items": {
            "type": "string",
            "xml": {
              "name": "imagens"
            }
          }
        }
      },
      "xml": {
        "name": "ExtracaoDadosRequest"
      }
    },
    "AtualizacaoDadosResponseDTO": {
      "type": "object",
      "required": [
        "cpf_cnpj",
        "tipo_pessoa"
      ],
      "properties": {
        "cpf_cnpj": {
          "type": "string",
          "description": "CPF/CNPJ"
        },
        "tipo_pessoa": {
          "type": "string",
          "description": "Tipo de Pessoa",
          "enum": [
            "F",
            "J"
          ]
        },
        "codigo_retorno": {
          "type": "integer",
          "format": "int32",
          "description": "Código de retorno. 0 para ok, 99 para erro"
        },
        "observacao": {
          "type": "string",
          "description": "Descrição da mensagem de erro ou observação caso código de retorno igual a 0"
        }
      },
      "xml": {
        "name": "AtualizacaoDadosResponse"
      }
    },
    "AtualizacaoDadosRequestDTO": {
      "type": "object",
      "required": [
        "cpf_cnpj",
        "dados",
        "identificador",
        "integracao",
        "tipo_pessoa"
      ],
      "properties": {
        "cpf_cnpj": {
          "type": "string",
          "description": "CPF/CNPJ"
        },
        "tipo_pessoa": {
          "type": "string",
          "description": "Tipo de Pessoa",
          "enum": [
            "F",
            "J"
          ]
        },
        "identificador": {
          "type": "integer",
          "format": "int64",
          "description": "Identificador do documento"
        },
        "integracao": {
          "type": "integer",
          "format": "int64",
          "description": "Código de integração para identificar o canal solicitante"
        },
        "dados": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista dos dados atualizados/fornecidos pelo usuário",
          "items": {
            "$ref": "#/definitions/DadosDTO"
          }
        }
      },
      "xml": {
        "name": "AtualizacaoDadosRequest"
      }
    },
    "DocumentosFinalizaContratacaoResponseDTO": {
      "type": "object",
      "required": [
        "classe_documental",
        "formato"
      ],
      "properties": {
        "classe_documental": {
          "type": "string",
          "description": "Classe documental das imagens"
        },
        "formato": {
          "type": "string",
          "description": "Formato da imagem",
          "enum": [
            "TIFF",
            "BMP",
            "PNG",
            "JPG"
          ]
        },
        "atributos": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista dos atributos do documento",
          "items": {
            "$ref": "#/definitions/DadosDTO"
          }
        },
        "conteudo": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista das imagens do documento em base64",
          "items": {
            "type": "string",
            "xml": {
              "name": "conteudo"
            }
          }
        },
        "links": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista das URLs das imagens para visualização via web",
          "items": {
            "type": "string",
            "xml": {
              "name": "links"
            }
          }
        }
      },
      "xml": {
        "name": "documentos"
      }
    },
    "FinalizaContratacaoResponseDTO": {
      "type": "object",
      "required": [
        "cpf_cnpj",
        "tipo_pessoa"
      ],
      "properties": {
        "cpf_cnpj": {
          "type": "string",
          "description": "CPF/CNPJ"
        },
        "tipo_pessoa": {
          "type": "string",
          "description": "Tipo de Pessoa",
          "enum": [
            "F",
            "J"
          ]
        },
        "codigo_retorno": {
          "type": "integer",
          "format": "int32",
          "description": "Código de retorno. 0 para ok, 99 para erro"
        },
        "observacao": {
          "type": "string",
          "description": "Descrição da mensagem de erro ou observação caso código de retorno igual a 0"
        },
        "autorizacao": {
          "type": "integer",
          "format": "int64",
          "description": "Código da autorização fornecido pelo usuário na requisição"
        },
        "documentos": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "items": {
            "$ref": "#/definitions/DocumentosFinalizaContratacaoResponseDTO"
          }
        }
      },
      "xml": {
        "name": "FinalizaContratacaoReponse"
      }
    },
    "DocumentosFinalizaContratacaoRequestDTO": {
      "type": "object",
      "required": [
        "classe_documental",
        "formato"
      ],
      "properties": {
        "classe_documental": {
          "type": "string",
          "description": "Classe documental das imagens"
        },
        "formato": {
          "type": "string",
          "description": "Formato da imagem",
          "enum": [
            "TIFF",
            "BMP",
            "PNG",
            "JPG"
          ]
        },
        "atributos": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista dos atributos do documento",
          "items": {
            "$ref": "#/definitions/DadosDTO"
          }
        },
        "conteudo": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista das imagens do documento em base64",
          "items": {
            "type": "string",
            "xml": {
              "name": "conteudo"
            }
          }
        }
      },
      "xml": {
        "name": "documentos"
      }
    },
    "FinalizaContratacaoRequestDTO": {
      "type": "object",
      "required": [
        "autorizacao",
        "cpf_cnpj",
        "documentos",
        "integracao",
        "tipo_pessoa"
      ],
      "properties": {
        "cpf_cnpj": {
          "type": "string",
          "description": "CPF/CNPJ"
        },
        "tipo_pessoa": {
          "type": "string",
          "description": "Tipo de Pessoa",
          "enum": [
            "F",
            "J"
          ]
        },
        "autorizacao": {
          "type": "integer",
          "format": "int64",
          "description": "Código da autorização fornecido pelo sistema"
        },
        "integracao": {
          "type": "integer",
          "format": "int64",
          "description": "Código de integração para identificar o canal solicitante"
        },
        "documentos": {
          "type": "array",
          "xml": {
            "wrapped": true
          },
          "description": "Lista dos documentos para finalização da contratação do produto",
          "items": {
            "$ref": "#/definitions/DocumentosFinalizaContratacaoRequestDTO"
          }
        }
      },
      "xml": {
        "name": "FinalizaContratacaoRequest"
      }
    }
  }
}